---
name: Add --repocli-config option and REPOCLI_CONFIG environment variable support
status: closed
created: 2025-08-25T12:52:00Z
updated: 2025-08-25T13:31:52Z
last_sync: 2025-08-25T23:03:33+02:00
github: https://github.com/quazardous/repocli/issues/17 
depends_on: []
parallel: false
conflicts_with: []
---

# Task: Add --repocli-config option and REPOCLI_CONFIG environment variable support

## Description
Implement support for specifying a custom configuration file path via command-line option `--repocli-config` and environment variable `REPOCLI_CONFIG`. This enhancement will provide more flexibility for users to manage multiple configurations and integrate REPOCLI into automated scripts.

## Acceptance Criteria
- [ ] `--repocli-config path/to/repocli.conf` command-line option implemented
- [ ] `REPOCLI_CONFIG` environment variable support added
- [ ] Priority order: CLI option > ENV variable > existing configuration hierarchy
- [ ] Configuration validation for specified paths (file exists, readable)
- [ ] Error handling for invalid or missing configuration files
- [ ] Help text updated to document new options
- [ ] Existing configuration discovery remains unchanged when options not used

## Technical Details
- Implementation approach: Modify main `repocli` script and `lib/config.sh`
- Key considerations: Must maintain backward compatibility with existing configuration
- Code locations/files affected:
  - `repocli` (main script) - argument parsing
  - `lib/config.sh` - configuration loading logic
  - Documentation in README.md and help output

## Configuration Priority Order
1. `--repocli-config /path/to/config` (highest priority)
2. `REPOCLI_CONFIG=/path/to/config` environment variable
3. `./repocli.conf` (project-specific)
4. `~/.repocli.conf` (user-specific) 
5. `~/.config/repocli/config` (XDG compliant, lowest priority)

## Implementation Requirements
- **Argument Parsing**: Handle `--repocli-config` before other arguments
- **Environment Variable**: Check `REPOCLI_CONFIG` during configuration loading
- **Path Validation**: Verify file exists and is readable
- **Error Messages**: Clear error messages for invalid paths or unreadable files
- **Documentation**: Update help text and README.md with new options

## Dependencies
- [ ] Understanding of existing configuration system in `lib/config.sh`
- [ ] Knowledge of main script argument parsing

## Effort Estimate
- Size: S-M
- Hours: 3-5 hours
- Parallel: true (independent enhancement)

## Definition of Done
- [ ] `--repocli-config` option works correctly
- [ ] `REPOCLI_CONFIG` environment variable support functional
- [ ] Configuration priority order implemented correctly
- [ ] Error handling for invalid paths
- [ ] Help documentation updated
- [ ] Backward compatibility preserved
- [ ] Manual testing with various configuration scenarios completed

## Usage Examples
```bash
# Via command line option
repocli --repocli-config /path/to/custom.conf issue list

# Via environment variable
export REPOCLI_CONFIG=/path/to/custom.conf
repocli issue list

# Priority test - CLI option overrides env var
export REPOCLI_CONFIG=/path/to/env.conf
repocli --repocli-config /path/to/cli.conf issue list  # uses cli.conf
```