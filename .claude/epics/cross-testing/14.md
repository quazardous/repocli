---
name: Implement Test Configuration Setup Command
status: completed
created: 2025-08-25T12:13:57Z
updated: 2025-08-25T17:00:00Z
last_sync: 2025-08-25T12:16:31Z 
github: https://github.com/quazardous/repocli/issues/14
depends_on: [2]
parallel: true
conflicts_with: []
---

# Task: Implement Test Configuration Setup Command

## Description
Create an interactive `/tests:init` command that guides users through setting up their private GitLab repository configuration for comprehensive cross-testing. This command will handle the secure setup of test credentials and repository access without exposing sensitive information in version control.

⚠️ **SECURITY FOCUS**: This command handles private repository configuration and must ensure no sensitive data leaks into version control.

## Acceptance Criteria
- [ ] Create `/tests:init` command script in `.claude/commands/`
- [ ] Interactive prompts for GitLab instance URL (default: https://gitlab.com)
- [ ] Interactive prompts for private GitLab repository (format: username/repository)
- [ ] Optional prompts for test issue number and username
- [ ] Validate repository access (test read permissions with glab CLI)
- [ ] Create `.tests.conf` file with proper format and permissions
- [ ] Automatically add `.tests.conf` to `.gitignore` if not present
- [ ] Create `.tests.conf.example` template file (versioned)
- [ ] Warn user before overwriting existing `.tests.conf`
- [ ] Provide clear success/error messages and next steps

## Technical Details
- Implementation approach: Bash script following existing command patterns in `.claude/commands/`
- Key considerations: Security, user experience, validation, error handling
- Code locations/files affected:
  - `.claude/commands/tests-init.sh` (new)
  - `.tests.conf` (created, not versioned)
  - `.tests.conf.example` (new, versioned)
  - `.gitignore` (updated if needed)

## Implementation Requirements
```bash
# Command structure
/tests:init
├── Check for existing .tests.conf (warn if exists)
├── Interactive prompts with defaults
├── Validate GitLab access using glab CLI
├── Create configuration files
├── Update .gitignore
└── Display success message with next steps
```

## Configuration Template
The command should create a `.tests.conf` file with this structure:
```ini
# GitLab Cross-Testing Configuration
# Generated by /tests:init on [timestamp]

# GitLab instance (default: https://gitlab.com)
gitlab_test_instance=https://gitlab.com

# Private GitLab repository for testing (required)
gitlab_test_repo=username/repository

# Optional: specific issue number for testing
gitlab_test_issue=123

# Optional: test username
gitlab_test_user=username
```

## User Experience Flow
1. Run `/tests:init`
2. Interactive prompts:
   - "GitLab instance URL [https://gitlab.com]: "
   - "Private GitLab repository (username/repo): "
   - "Test issue number [optional]: "
   - "Test username [optional]: "
3. Validation: Test repository access with `glab api projects/:id`
4. Create configuration files
5. Success message with guidance for running tests

## Error Handling
- Invalid repository format
- Repository access denied (authentication issues)
- Network connectivity problems
- File permission errors
- GitLab CLI not available

## Security Requirements
- Never log sensitive repository information
- Set restrictive permissions on `.tests.conf` (600)
- Validate input to prevent injection attacks
- Clear instructions about keeping `.tests.conf` private